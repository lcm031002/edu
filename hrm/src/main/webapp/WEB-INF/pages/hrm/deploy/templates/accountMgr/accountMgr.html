<div ng-controller=AccountCtrl><div class="panel panel-default" style="margin-bottom: 10px;"><div class="panel-heading font-bold">账户管理</div><div class=panel-body style="padding: 15px;"><form class="ng-pristine ng-valid" role=form><div class=col-lg-6><div class=form-group><label class="col-sm-3 fl" style="line-height: 34px;">归属公司</label><div class="input-group col-sm-9"><select class=form-control ng-model=selectedCompany ng-options="company.name for company in companyList track by company.id" ng-change=queryBranchsWithId(selectedCompany)><option value="">全部校区</option></select></div></div></div><div class=col-lg-6><div class=form-group><label class="col-sm-3 fl" style="line-height: 34px;">归属校区</label><div class="input-group col-sm-9"><select class=form-control ng-model=branch><option value="">全部校区</option><option value={{branch.id}} ng-repeat="branch in branchsList">{{branch.name}}</option></select></div></div></div><div class=col-lg-6><div class=form-group><label class="col-sm-3 fl" style="line-height: 34px;">搜索关键字</label><div class="input-group col-sm-9"><input type=text class=form-control ng-model=search_info></div></div></div><div class=col-lg-12 align=center><button type=submit class="btn btn-default" ng-click=queryAccount()>查询</button></div></form></div></div><div><div class="panel panel-default" style="margin-bottom: 10px;"><div class="panel-heading font-bold">账户列表<div class="fr cur" ng-click=toAddAccountPanel()><i class="fa fa-plus"></i> 添加</div></div><div class=panel-body style="padding: 15px;"><table class="table table-striped table-hover table-bordered" style="margin-bottom: 10px;"><col width=10%><col width=20%><col width=20%><col width=20%><col width=30%><tr><th>id</th><th>归属公司</th><th>校区</th><th>账户名</th><th>操作</th></tr><tr ng-repeat="account in accountList" ng-if="accountList && accountList.length" ng-click=checked(account) class="{{account.checked?'success':''}}"><td>{{account.id}}</td><td>{{account.companyName}}</td><td>{{account.branchName}}</td><td>{{account.accountName}}</td><td><a href=javascript:void(0) ng-click=toUpdateAccountPanel(account)>修改</a> <a href=javascript:void(0) ng-click=toDeleteAccountPanel(account)>禁用</a></td></tr><tr ng-if=!isLoadingOrders&&(!accountList||!accountList.length)><td colspan=5 align=center>暂无数据.</td></tr><tr ng-if="isLoading == 'loading...'"><td colspan=5 align=center><img src=img/icons/big_load.gif></td></tr></table><div align=center><ul class=pagination ng-if="totalPage>1"><li ng-repeat="i in getNumber(totalPage) track by $index" class="{{ $index+1==currentPage ? 'active':'' }}" ng-click=queryAccount()><span>{{$index+1}}</span></li></ul></div></div></div></div><div><div class=col-lg-6><div class="panel panel-default" style="margin-bottom: 10px;"><div class="panel-heading font-bold">账户角色列表<div class="fr cur" ng-click=updateAccount() style="margin-left: 10px;"><i class="fa fa-save"></i> 保存</div><div class="fr cur" ng-click=toAddRolePanel() style="margin-left: 10px;"><i class="fa fa-plus"></i> 添加</div></div><div class=panel-body style="padding: 15px;"><table class="table table-striped table-hover table-bordered"><col width=10%><col width=40%><col width=50%><tr><th>id</th><th>角色名称</th><th>操作</th></tr><tr ng-repeat="role in curAccount.roleList" ng-if="curAccount && curAccount.roleList && curAccount.roleList.length"><td>{{role.id}}</td><td>{{role.roleName}}</td><td><a href=javascript:void(0) ng-click=removeRole(role)>删除</a></td></tr><tr ng-if="!curAccount || !curAccount.roleList || !curAccount.roleList.length"><td colspan=3 align=center>暂无数据.</td></tr><tr ng-if="isLoadingRole == 'loading...'"><td colspan=3 align=center><img src=img/icons/big_load.gif></td></tr></table></div></div></div><div class=col-lg-6><div class="panel panel-default" style="margin-bottom: 10px;"><div class="panel-heading font-bold">账户校区列表<div class="fr cur" ng-click=updateAccount() style="margin-left: 10px;"><i class="fa fa-save"></i> 保存</div></div><div class=panel-body style="padding: 15px;"><div id=branchTree></div></div></div></div></div><div ng-include="'templates/segment/account_info.html'"></div></div>