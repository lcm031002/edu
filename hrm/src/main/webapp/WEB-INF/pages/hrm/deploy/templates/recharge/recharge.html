<div ng-controller=RechargesCtrl><style>
    .alert-danger, .alert-error {
        color: #b94a48;
        background-color: #f2dede;
        border-color: #eed3d7;
    }
</style><div><h3>充值单批注</h3></div><div class="alert fade in alert-info"><p>功能说明:</p><p>1、充值单批注功能，提供财务专员查询ERP的充值单据，并根据需要批注单据到外账系统；</p><p>2、充值单批注功能，支持设置同步功能，后续该充值单涉及的学员，只要有新报班，且该报班消耗该学员外账账户金额后，账户依然为正，则自动同步该报班单，以及后续的报班单据相关数据；</p><p>3、被批注的报班单，取消批注的时候，之前同步的数据，将保留；</p></div><div><div class="panel panel-default" style="margin-bottom: 10px;"><div class="panel-heading font-bold">充值单批注</div><div class=panel-body style="padding: 15px;" id=panelBody><form class="ng-pristine ng-valid" role=form><div class=col-lg-6><div class=form-group><label class="col-sm-3 fl" style="line-height: 34px;">搜索关键字</label><div class="input-group col-sm-9"><input type=text class=form-control ng-model=search_info></div></div></div><div class=col-lg-6 align=left><button type=submit class="btn btn-default" ng-click=queryIndex(1)>查询</button></div></form></div></div><div class=tool_bar><button type=button style=margin-left:5px; class="btn btn-default" ng-repeat="company in companys" ng-click=selectCompany(company)>{{company.name}}</button> <a type=button class="btn btn-default" href=#/financial/ExternalAccountManagement/fileUpload>导入</a> <button type=button class="btn btn-default" ng-click=exports()>导出</button></div><div style="margin-top: 10px;overflow-x: scroll;min-height: 300px;"><table class="table table-hover table-striped"><col align=center width=5%><col align=center width=17%><col align=center width=5%><col align=center width=20%><col align=center width=10%><col align=center width=10%><col align=center width=10%><col align=center width=10%><col align=center width=13%><tr><th><input type=checkbox ng-click=checkAllRows() checked ng-if=checkAll> <input type=checkbox ng-click=checkAllRows() ng-if=!checkAll></th><th>编码</th><th>类型</th><th>姓名/编码</th><th>金额</th><th>公司</th><th>经办人</th><th>时间</th><th>操作</th></tr><tr ng-repeat="recharge in rechargesData" order=order ng-if="rechargesData&&rechargesData.length>0" class=cur><td colspan=9><table style="width: 100%;"><col align=center width=5%><col align=center width=17%><col align=center width=5%><col align=center width=20%><col align=center width=10%><col align=center width=10%><col align=center width=10%><col align=center width=10%><col align=center width=13%><tr><td><input type=checkbox ng-click=check(recharge) checked ng-if=recharge.checked> <input type=checkbox ng-click=check(recharge) ng-if=!recharge.checked></td><td ng-click=showDetail(recharge)>{{recharge.encoding}}</td><td ng-click=showDetail(recharge)>{{recharge.type_name}}</td><td ng-click=showDetail(recharge)>{{recharge.student_name}}（<span style="font-size: 12px;color: #999;">{{recharge.student_encoding}}</span>）</td><td ng-click=showDetail(recharge)>{{recharge.amount}}<span style="font-size: 12px;color: #999;">（{{recharge.actual_amount | number : 2}}）</span></td><td ng-click=showDetail(recharge)>{{recharge.company_name}}</td><td ng-click=showDetail(recharge)>{{recharge.payerName}}</td><td ng-click=showDetail(recharge)>{{recharge.payerTime}}</td><td><a ng-if=!recharge.sync style=margin-right:10px;>充值外账</a> <a ng-if=!recharge.syncOrders ng-click=timing(recharge) style=margin-right:10px;>定时</a> <a ng-if=recharge.syncOrders ng-click=timing(recharge)>不定时</a></td></tr><tr ng-if=recharge.showDetail><td colspan=9><div style="background-color: #fff;"><div class="form-group col-lg-6"><label class=col-sm-2 style="line-height: 34px;">单据ID</label><p class="col-sm-10 form-control-static">{{recharge.id}}</p></div><div class="form-group col-lg-6"><label class=col-sm-2 style="line-height: 34px;">业务校区</label><p class="col-sm-10 form-control-static">{{recharge.branch_name}}</p></div><div class="form-group col-lg-6"><label class=col-sm-2 style="line-height: 34px;">现金</label><p class="col-sm-10 form-control-static">{{recharge.cash | number : 2}}</p></div><div class="form-group col-lg-6"><label class=col-sm-2 style="line-height: 34px;">刷卡</label><p class="col-sm-10 form-control-static">{{recharge.payByCard | number : 2}}</p></div><div class="form-group col-lg-6"><label class=col-sm-2 style="line-height: 34px;">转账</label><p class="col-sm-10 form-control-static">{{recharge.transfer | number : 2}}</p></div><div class="form-group col-lg-6"><label class=col-sm-2 style="line-height: 34px;">储值账户</label><p class="col-sm-10 form-control-static">{{recharge.account}}</p></div><div class="form-group col-lg-6"><label class=col-sm-2 style="line-height: 34px;">批注人</label><p class="col-sm-10 form-control-static">{{recharge.commentPersonName}}</p></div><div class="form-group col-lg-6"><label class=col-sm-2 style="line-height: 34px;">批注时间</label><p class="col-sm-10 form-control-static">{{recharge.commentTime}}</p></div></div></td></tr></table></td></tr><tr ng-if="isLoadingRechargesData == 'loading...'"><td colspan=9 align=center><img src=img/icons/big_load.gif></td></tr><tr ng-if="(!rechargesData||!rechargesData.length)&&isLoadingRechargesData==''"><td colspan=9 align=center>没有数据</td></tr></table></div><div class=fr ng-if="totalPage>=1"><ul class=pagination><li ng-model=currentPage ng-if="totalPage>=1" ng-click=queryIndex(1)><span>首页</span></li><li ng-if="currentPage>1" ng-click=queryIndex(currentPage-1)><span>上一页</span></li><li ng-repeat="i in paginationBars track by $index" class="{{ i==currentPage ? 'active':'' }}"><span ng-click=queryIndex(i)>{{i}}</span></li><li ng-model=currentPage ng-if="currentPage<totalPage" ng-click=queryIndex(currentPage+1)><span>下一页</span></li><li ng-model=totalPage ng-click=queryIndex(totalPage)><span>尾页</span></li></ul></div></div></div>