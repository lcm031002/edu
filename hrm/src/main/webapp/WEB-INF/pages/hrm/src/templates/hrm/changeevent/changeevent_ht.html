<div ng-controller="ChangeEvent_HtCtrl">
     <div class="panel panel-default" style="margin-bottom: 10px;">
        <div class="panel-heading font-bold">
            人事异动历史
        </div>
        <div class="panel-body" style="padding: 15px;">
            <form class="ng-pristine ng-valid" role="form">
            	<div class="col-lg-6">
	                <div class="form-group">
			            <label class="col-sm-3 fl" style="line-height: 34px;">归属团队</label>
			            <div class="col-sm-9 input-group">
			               <select class="form-control" 
			               ng-change="queryBranchsWithId(changeBuId)"
			            ng-model="changeBuId" 
			            ng-selected="changeBuId"
			            ng-options="bu.id as bu.org_name for bu in buList"/>
			            </div>
			        </div>
		        </div>
		        <div class="col-lg-6">
			        <div class="form-group">
			            <label class="col-sm-3 fl" style="line-height: 34px;">归属校区</label>
			            <div class="col-sm-9 input-group">
			            <select class="form-control"
			            ng-model="changeBranchId" 
			            ng-selected="changeBranchId"
			            ng-options="branch.id as branch.org_name for branch in branchsList"/>
			            </div>
			        </div> 
		        </div>
                
                <div class="col-lg-6">
                    <div class="form-group">
                        <label class="col-sm-3 fl" style="line-height: 34px;">搜索关键字</label>
                        <div class="input-group col-sm-9 ">
                            <input type="text" class="form-control" ng-model="changeSeacherinfo"/>
                        </div>
                    </div>
                </div>
                <div class="col-lg-12" align="center">
                    <button type="submit" class="btn btn-default" ng-click="queryInfo(1)">查询</button>
                </div>
            </form>
        </div>
    </div>

     <div>
         <table class="table table-striped table-hover table-bordered">
            <tr>
                <th>发起时间</th>
                <th>结束时间</th>
                <th>团队</th>
                <th>校区</th>
                <th>员工</th>
                <th>类型</th>
                <th>当前处理人</th>
                <th>发起人</th>
                <th>操作</th>
            </tr>

            <tr ng-repeat="changeeventHt in changeHtList" ng-if="changeHtList && changeHtList.length">
                <td>{{changeeventHt.application_time|date:'yyyy-MM-dd'}}</td>
                <td>{{changeeventHt.last_update_time|date:'yyyy-MM-dd'}}</td>
                <td>{{changeeventHt.bu_name}}</td>
                <td>{{changeeventHt.branch_name}}</td>
                <td>{{changeeventHt.employee_name}}</td>
                <td>{{changeeventHt.application_name}}</td>
                <td>{{changeeventHt.handler_name}}</td>
                <td>{{changeeventHt.organiser_name}}</td>
                <td>
                	<a href="javascript:void(0)" ng-click="detail(changeeventHt)">详情</a>
                </td>
            </tr>

            <tr ng-if="!changeHtList||!changeHtList.length">
                <td colspan="9">暂无数据.</td>
            </tr>

            <tr ng-if="isLoading == 'loading...'">
                <td colspan="9" align="center">
			        <img src="img/icons/big_load.gif">
			    </td>
            </tr> 
        </table>
        
          <div class="center"  ng-if="pageParam.pages>=1" >
            <ul class="pagination">
             <li ng-model="pageParam.pageNum" ng-if="pageParam.pages>=1"  ng-click="queryInfo(1)">
                    <span >首页</span>
                </li>
                  <li    ng-if="pageParam.pageNum>1"    ng-click="queryInfo(pageNum-1)" >
                    <span>上一页</span>
                </li>
                <li     ng-repeat="i in paginationBars track by $index" class="{{ i==pageParam.pageNum ? 'active':'' }}"  >
                    <span ng-click="queryInfo(i)" >{{i}}</span>
                </li>
                <li ng-model="pageParam.pageNum"  ng-if="pageParam.pageNum<pageParam.pages"    ng-click="queryInfo(pageNum+1)">
                    <span >下一页</span>
                </li>
                <li ng-model="pageParam.pages"    ng-click="queryInfo(pageParam.pages)">
                    <span >尾页</span>
                </li>
                
            </ul>
        </div> 	
    </div>
	<div ng-show="showModel">
	 <div class="panel panel-default" style="position:absolute;height: auto;width:100%;left:0px;top:0px;z-index: 999;">
                <div class="panel-heading font-bold">流程基本信息  <i class="fa fa-close cur fr" ng-click="toClosePanel()"></i></div>
                <div class="panel-body">	
	 			
					<div ng-include="'templates/hrm/model/change_post/DXB_school_post.html'"></div>
					<div ng-include="'templates/hrm/model/change_post/DXB_teacher_post.html'"></div>
					<div ng-include="'templates/hrm/model/change_post/GXH_teacher_post.html'"></div>
					<div ng-include="'templates/hrm/model/change_post/GXH_teaching_dept_360.html'"></div>
					<div ng-include="'templates/hrm/model/change_post/GXH_teaching_dept_lecture.html'"></div>
					<div ng-include="'templates/hrm/model/change_post/GXH_teaching_dept_post.html'"></div>
					<div ng-include="'templates/hrm/model/change_post/GXH_consulting_dept_360.html'"></div>
					<div ng-include="'templates/hrm/model/change_post/GXH_consulting_dept_post.html'"></div> 
				</div>
		</div>
	</div>
</div>