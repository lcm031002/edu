<div ng-controller="EBOrdersCtrl">
    <div class="panel panel-default" style="margin-bottom: 10px;">
        <div class="panel-heading font-bold">
            报班业务
        </div>
        <div class="panel-body" style="padding: 15px;" id="panelBody">
            <div class="col-lg-6">
                <div class="form-group">
                    <label class="col-sm-3 col-md-3 col-lg-3 fl" style="line-height: 34px;">开始时间</label>
                    <div class="input-group col-sm-9  col-md-9  col-lg-9 " ng-controller="DatepickerDemoCtrl">
                        <input type="text" class="form-control"
                               uib-datepicker-popup="{{format}}"
                               current-text="今天"
                               close-text="关闭"
                               clear-text="清理"
                               ng-model="searchPage.startDate"
                               is-open="opened"
                               max-date="searchPage.endDate"
                               id="startDate"
                               ng-readonly="true"
                                />

                        <span class="input-group-btn">
                            <button type="button" class="btn btn-default" ng-click="open($event)">
                                <i class="glyphicon glyphicon-calendar"></i>
                            </button>
                        </span>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="form-group">
                    <label class="col-sm-3 col-md-3 col-lg-3 fl" style="line-height: 34px;">截止日期</label>
                    <div class="input-group col-sm-9  col-md-9  col-lg-9 " ng-controller="DatepickerDemoCtrl">
                        <input type="text" class="form-control"
                               uib-datepicker-popup="{{format}}"
                               current-text="今天"
                               close-text="关闭"
                               clear-text="清理"
                               ng-model="searchPage.endDate"
                               is-open="opened"
                               min-date="searchPage.startDate"
                               id="endDate"
                               ng-readonly="true"
                                />

                            <span class="input-group-btn">
                                <button type="button" class="btn btn-default" ng-click="open($event)">
                                    <i class="glyphicon glyphicon-calendar"></i>
                                </button>
                            </span>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="form-group">
                    <label class="col-sm-3 col-md-3 col-lg-3 fl" style="line-height: 34px;">归属公司</label>
                    <div class="input-group col-sm-9  col-md-9  col-lg-9 ">
                        <select class="form-control" ng-model="searchPage.selectedCompany"  ng-change="queryBranchs()" >
                            <option value=" ">全部公司</option>
                            <option value="{{company.id}}" ng-repeat="company in companyList">{{company.name}}</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="form-group">
                    <label class="col-sm-3 col-md-3 col-lg-3 fl" style="line-height: 34px;">归属校区</label>
                    <div class="input-group col-sm-9  col-md-9  col-lg-9 ">
                        <select class="form-control" ng-model="searchPage.selectedBranch" >
                            <option value=" ">全部校区</option>
                            <option value="{{branch.id}}" ng-repeat="branch in branchsList">{{branch.name}}</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="form-group">
                    <label class="col-sm-3 col-md-3 col-lg-3 fl" style="line-height: 34px;">搜索关键字</label>
                    <div class="input-group col-sm-9  col-md-9  col-lg-9 ">
                        <input type="text" class="form-control" ng-model="search_info"/>
                    </div>
                </div>
            </div>
            <div class="col-lg-12" align="center">
                <button type="button" class="btn btn-default" ng-click="queryOrderInfo()">查询</button>
            </div>
        </div>
    </div>
    
    <div class="panel panel-default" style="margin-bottom: 10px;">
        <div class="panel-body" style="padding: 15px;">
            <div class="tool_bar" style="margin-bottom: 10px;">
                <a href="#/businessSystem/BSorderMgr2placeAnOrder" class="btn btn-default" style="margin-right: 10px;">报班</a>
            </div>
            <table class="table table-striped table-hover table-bordered">
                <col width="20%">
                <col width="5%">
                <col width="5%">
                <col width="5%">
                <col width="20%">
                <col width="20%">
                <col width="25%">
                <tr>
                    <th>编码</th>
                    <th>金额</th>
                    <th>原价</th>
                    <th>课时</th>
                    <th>时间</th>
                    <th>说明</th>
                    <th>操作</th>
                </tr>
                <tr ng-repeat="order in orderList" ng-if="orderList&&orderList.length">
                    <td>{{order.order_no}}</td>
                    <td>{{order.fee_amount | number : 2}}</td>
                    <td>{{order.actural_amount | number : 2}}</td>
                    <td>{{order.courseTimes}}</td>
                    <td>{{order.create_date | date:'yyyy-MM-dd'}}</td>
                    <td>{{order.remark}}</td>
                    <td>
                        <a style="margin-right: 10px;" ng-click="orderCancel(order)" href="javascript:void(0);">作废</a>
						 <a style="margin-right: 10px;" ng-click=showDetails(order) href=javascript:void(0);>详情</a></td>
                    </td>
                </tr>
                <tr ng-if="(!orderList||!orderList.length)&&isLoadingOrders==''">
                    <td colspan="7" >
                        <div align="center">暂无数据.</div>
                    </td>
                </tr>
                <tr ng-if="isLoadingOrders == 'loading...'">
                    <td colspan="7" align="center">
                        <img src="img/icons/big_load.gif">
                    </td>
                </tr>
            </table>

              <div class="fr"  ng-if="totalPage>=1" >
            <ul class="pagination">
             <li ng-model="currentPage" ng-if="totalPage>=1"  ng-click="queryIndex(1)">
                    <span >首页</span>
                </li>
                  <li    ng-if="currentPage>1"    ng-click="queryIndex(currentPage-1)" >
                    <span>上一页</span>
                </li>
                <li     ng-repeat="i in paginationBars track by $index" class="{{ i==currentPage ? 'active':'' }}"  >
                    <span ng-click="queryIndex(i)" >{{i}}</span>
                </li>
                <li ng-model="currentPage"  ng-if="currentPage<totalPage"    ng-click="queryIndex(currentPage+1)">
                    <span >下一页</span>
                </li>
                <li ng-model="totalPage"    ng-click="queryIndex(totalPage)">
                    <span >尾页</span>
                </li>
                
            </ul>
        </div>
        </div>
    </div>
    
    <div ng-include="'templates/segment/orderDetails.html'"></div>
</div>