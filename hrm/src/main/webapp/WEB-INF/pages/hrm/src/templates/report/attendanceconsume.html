

<div ng-controller="AttendanceConsumeCtrl">
    <style>
        .alert-danger, .alert-error {
            color: #b94a48;
            background-color: #f2dede;
            border-color: #eed3d7;
        }
    </style>
    <div class="panel panel-default" style="margin-bottom: 10px;">
        <div class="panel-heading font-bold">
            考勤消耗
        </div>
        <div class="panel-body" style="padding: 15px;" id="panelBody">
 
            <form class="ng-pristine ng-valid" role="form">
<!--                 <div class="col-lg-6">
                    <div class="form-group">
                        <label class="col-sm-3 fl" style="line-height: 34px;">课程季</label>
                        <div class="input-group col-sm-9 ">
                            <select class="form-control" ng-model="selectedSeason" >
                                <option value=" ">全部</option>
                                <option value="{{s.id}}" ng-repeat="s in seasons">{{s.name}}</option>
                            </select>
                        </div>
                    </div>
                </div> -->
                <div class="col-lg-6">
                    <div class="form-group">
                        <label class="col-sm-2 fl" style="line-height: 34px;">归属公司</label>
                        <div class="input-group col-sm-5">
                            <select class="form-control" ng-model="selectedCompany" ng-options="com.name for com in companys">
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="form-group">
                        <label class="col-sm-2 fl" style="line-height: 34px;">归属校区</label>
                        <div class="input-group col-sm-5">
                            <select class="form-control" ng-model="selectedBranch" ng-options="branch.name for branch in branchsList">
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="form-group">
                        <label class="col-sm-2 fl" style="line-height: 34px;">开始时间</label>
                        <div class="input-group col-sm-5" ng-controller="DatepickerDemoCtrl">
                            <input type="text" class="form-control"
                                   uib-datepicker-popup="{{format}}"
                                   current-text="今天"
                                   close-text="关闭"
                                   clear-text="清理"
                                   ng-model="st"
                                   is-open="opened"
                                   ng-readonly="true"
                                   id="beginDate"
                                    />

                        <span class="input-group-btn">
                            <button type="button" class="btn btn-default" ng-click="open($event)">
                                <i class="glyphicon glyphicon-calendar"></i>
                            </button>
                        </span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="form-group">
                        <label class="col-sm-2 fl" style="line-height: 34px;">截止日期</label>
                        <div class="input-group  col-sm-5" ng-controller="DatepickerDemoCtrl">
                            <input type="text" class="form-control"
                                   uib-datepicker-popup="{{format}}"
                                   current-text="今天"
                                   close-text="关闭"
                                   clear-text="清理"
                                   ng-model="dt"
                                   is-open="opened"
                                   min-date="minDate"
                                   ng-readonly="true"
                                   id="endDate"
                                    />

                            <span class="input-group-btn">
                                <button type="button" class="btn btn-default" ng-click="open($event)">
                                    <i class="glyphicon glyphicon-calendar"></i>
                                </button>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                   <div class="form-group">
                     <div class="col-sm-6">
		                  <div class="checkbox">
						    <label>
						      <input id="isWfd" ng-model="isWfd" value="1" type="checkbox"/>查询晚自习(默认查询大小班)
						    </label>
						  </div>
					  </div>
					  <div class="col-lg-4">
					   <div class="checkbox">
						   <label>
						      <input  id="isCourseTime" ng-model="isCourseTime" value="1" type="checkbox"/>按上课时间
						   </label>
					   </div> 
					  </div>
					</div>
                </div>
                  <div class="col-lg-6">
					<div  class="form-group">
						<div class="col-sm-4">
	                      <button type="submit" class="btn btn-default" ng-click="queryInfo()">查询</button>
	                      <!--<button type="button"  class="btn btn-default">导入</button>-->
	                      <button type="button" ng-click="exp()" class="btn btn-default">导出</button>
	                    </div>
                   </div>
                </div>
            </form>
        </div>
    </div>

    <div>
        <div style="margin-top: 10px;overflow-x: auto;min-height: 300px;white-space:nowrap;">
            <table class="table table-hover table-striped table-bordered">   
                <tr>
					<th  nowrap="nowrap">序号</th>
					<th  nowrap="nowrap">报班合同编号</th>
					<th  nowrap="nowrap">业务校区</th>
					<th  nowrap="nowrap">学生编码</th>
					<th  nowrap="nowrap">学生姓名</th>
					<th  nowrap="nowrap">金额</th>
					<th  nowrap="nowrap">消耗课时</th>
					<th  nowrap="nowrap">课程</th>
					<th  nowrap="nowrap">报班总次数</th>
					<th  nowrap="nowrap">课次</th>
					<th  nowrap="nowrap">老师</th>
					<th  nowrap="nowrap">课时长度</th>
					<th  nowrap="nowrap">上课日期</th>
					<th  nowrap="nowrap">上课时间</th>
					<th  nowrap="nowrap">下课时间</th>
					<th  nowrap="nowrap">考勤日期</th>
					<th  nowrap="nowrap">考勤状态</th>
					<th  nowrap="nowrap">上次考勤状态</th>
					<th  nowrap="nowrap">是否跨月</th>
					<th  nowrap="nowrap">业绩校区</th>
					<th  nowrap="nowrap">学管师</th>
					<th  nowrap="nowrap">中教</th>
					<th  nowrap="nowrap">中教长度</th>
					<th  nowrap="nowrap">外教</th>
					<th  nowrap="nowrap">外教长度</th>
                </tr>
                <tr  ng-repeat="d in reportData" order="order" ng-if="reportData&&reportData.length>0" class="cur">
								<td  nowrap="nowrap">{{$index + 1}}</td>
								<td  nowrap="nowrap">{{d.orderNo}}</td>
								<td  nowrap="nowrap">{{d.orgName}}</td>
								<td  nowrap="nowrap">{{d.studentNo}}</td>
								<td  nowrap="nowrap">{{d.studentName}}</td>
								<td  nowrap="nowrap">{{d.attendAmount}}</td>
								<td  nowrap="nowrap">{{d.courseCnt}}</td>
								<td  nowrap="nowrap">{{d.courseName}}</td>
								<td  nowrap="nowrap">{{d.courseTotalCount}}</td>
								<td  nowrap="nowrap">{{d.courseTimes}}</td>
								<td  nowrap="nowrap">{{d.teacherName}}</td>
								<td  nowrap="nowrap">{{d.hourLen}}</td>
								<td  nowrap="nowrap">{{d.courseDate}}</td>
								<td  nowrap="nowrap">{{d.startTime}}</td>
								<td  nowrap="nowrap">{{d.endTime}}</td>
								<td  nowrap="nowrap">{{d.attendDate}}</td>
								<td  nowrap="nowrap">{{d.attType}}</td>
								<td  nowrap="nowrap">{{d.lastAtt}}</td>
								<td  nowrap="nowrap">{{d.kuaYue}}</td>
								<td  nowrap="nowrap">{{d.COURSE_BRANCH_NAME}}</td>
								<td  nowrap="nowrap">{{d.cnselorName}}</td>
								<td  nowrap="nowrap">{{d.courseTeacherCn}}</td>
								<td  nowrap="nowrap">{{d.courseTeacherCn_len}}</td>
								<td  nowrap="nowrap">{{d.courseTeacherEn}}</td>
								<td  nowrap="nowrap">{{d.courseTeacherEn_len}}</td>
			    </tr>
                <tr ng-if="isLoadingOrders == 'loading...'">
                    <td colspan="24" align="center">
                        <img src="img/icons/big_load.gif">
                    </td>
                </tr>

                <tr ng-if="!isLoadingOrders&&(!reportData||!reportData.length)">
                    <td colspan="24" align="center"> 没有数据 </td>
                </tr>
        </div>
        <div class="fr"  ng-if="totalPage>=1" >
            <ul class="pagination">
             <li ng-model="currentPage" ng-if="totalPage>=1"  ng-click="queryIndex(1)">
                    <span >首页</span>
                </li>
                  <li    ng-if="currentPage>1"    ng-click="queryIndex(currentPage-1)" >
                    <span>上一页</span>
                </li>
                <li     ng-repeat="i in paginationBars track by $index" class="{{ i==currentPage ? 'active':'' }}"  >
                    <span ng-click="queryIndex(i)" >{{i}}</span>
                </li>
                <li ng-model="currentPage"  ng-if="currentPage<totalPage"    ng-click="queryIndex(currentPage+1)">
                    <span >下一页</span>
                </li>
                <li ng-model="totalPage"    ng-click="queryIndex(totalPage)">
                    <span >尾页</span>
                </li>
                
            </ul>
        </div>
    </div>
</div>
