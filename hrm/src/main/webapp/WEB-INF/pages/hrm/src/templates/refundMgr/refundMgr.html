<div ng-controller=BSrefundCtrl>
	<div class="panel panel-default" style="margin-bottom: 10px;">
		<div class="panel-heading font-bold">退费业务</div>
		<div class=panel-body style="padding: 15px;" id=panelBody>
			<div class=col-lg-6>
				<div class=form-group>
					<label class="col-sm-3 col-md-3 col-lg-3 fl"
						style="line-height: 34px;">开始时间</label>
					<div class="input-group col-sm-9 col-md-9 col-lg-9"
						ng-controller=DatepickerDemoCtrl>
						<input type=text class=form-control
							uib-datepicker-popup={{format}} current-text=今天 close-text=关闭
							clear-text=清理 ng-model=startDate is-open=opened max-date=endDate
							ng-readonly=true id=beginDate> <span
							class=input-group-btn><button type=button
								class="btn btn-default" ng-click=open($event)>
								<i class="glyphicon glyphicon-calendar"></i>
							</button>
							</span>
					</div>
				</div>
			</div>
			<div class=col-lg-6>
				<div class=form-group>
					<label class="col-sm-3 col-md-3 col-lg-3 fl"
						style="line-height: 34px;">截止日期</label>
					<div class="input-group col-sm-9 col-md-9 col-lg-9"
						ng-controller=DatepickerDemoCtrl>
						<input type=text class=form-control
							uib-datepicker-popup={{format}} current-text=今天 close-text=关闭
							clear-text=清理 ng-model=endDate is-open=opened min-date=startDate
							ng-readonly=true id=endDate> <span class=input-group-btn><button
								type=button class="btn btn-default" ng-click=open($event)>
								<i class="glyphicon glyphicon-calendar"></i>
							</button></span>
					</div>
				</div>
			</div>
			<div class=col-lg-6>
				<div class=form-group>
					<label class="col-sm-3 col-md-3 col-lg-3 fl"
						style="line-height: 34px;">归属公司</label>
					<div class="input-group col-sm-9 col-md-9 col-lg-9">
						<select class=form-control ng-model=searchPage.selectedCompany
							ng-change=queryBranchsWithId(searchPage.selectedCompany)><option
								value="">全部公司</option>
							<option value={{company.id}} ng-repeat="company in companyList">{{company.name}}</option></select>
					</div>
				</div>
			</div>
			<div class=col-lg-6>
				<div class=form-group>
					<label class="col-sm-3 col-md-3 col-lg-3 fl"
						style="line-height: 34px;">归属校区</label>
					<div class="input-group col-sm-9 col-md-9 col-lg-9">
						<select class=form-control ng-model=searchPage.selectedBranch><option
								value="">全部校区</option>
							<option value={{branch.id}} ng-repeat="branch in branchsList">{{branch.name}}</option></select>
					</div>
				</div>
			</div>
			<div class=col-lg-6>
				<div class=form-group>
					<label class="col-sm-3 col-md-3 col-lg-3 fl"
						style="line-height: 34px;">搜索关键字</label>
					<div class="input-group col-sm-9 col-md-9 col-lg-9">
						<input type=text class=form-control ng-model=search_info>
					</div>
				</div>
			</div>
			<div class=col-lg-12 align=center>
				<button type=submit class="btn btn-default" ng-click=queryInfo()>查询</button>
			</div>
		</div>
	</div>
	<div class="panel panel-default" style="margin-bottom: 10px;">
		<div class=panel-body style="padding: 15px;">
			<div class="tool_bar fr" style="margin-bottom: 10px;">
				<a href=#/businessSystem/BSrefundMgr2refund class="btn btn-primary"
					style="margin-right: 10px;">去退费</a>
			</div>
			<table class="table table-striped table-hover table-bordered">
				<col width=10%>
				<col width=5%>
				<col width=10%>
				<col width=5%>
				<col width=15%>
				<col width=15%>
				<col width=15%>
				<col width=10%>
				<tr>
					<th>退费单据</th>
					<th>订单id</th>
					<th>订单编码</th>
					<th>金额</th>
					<th>学生编码/姓名</th>
					<th>业务校区</th>
					<th>业绩校区</th>
					<th>课程名称</th>
					<th>操作</th>
				</tr>
				<tr ng-repeat="refund in refundList"
					ng-if=refundList&&refundList.length>
					<td>{{refund.encoding}}</td>
					<td>{{refund.orderId}}</td>
					<td>{{refund.orderNo}}</td>
					<td>{{refund.amount | number:2}}</td>
					<td>{{refund.student_encoding}}/{{refund.student_name}}</td>
					<td>{{refund.bussinessSchName}}</td>
					<td>{{refund.courseSchName}}</td>
					<td>{{refund.courseName}}</td>
					<td><a style="margin-right: 10px;"
						ng-click=toRefundCancel(refund) href=javascript:void(0);>作废</a> <a
						style="margin-right: 10px;" href=javascript:void(0);
						ng-click=toRefundDetail(refund)>详情</a></td>
				</tr>
				<tr ng-if=!refundList||!refundList.length>
					<td colspan=8><div align=center>暂无数据.</div></td>
				</tr>
				<tr ng-if="isLoadingOrders == 'loading...'">
					<td colspan=8 align=center><img src=img/icons/big_load.gif></td>
				</tr>
			</table>
			<div class=fr ng-if="totalPage>=1">
				<ul class=pagination>
					<li ng-model=currentPage ng-click=queryIndex(1)><span>首页</span></li>
					<li ng-if="currentPage>1" ng-click=queryIndex(currentPage-1)><span>上一页</span></li>
					<li ng-repeat="i in paginationBars track by $index" 	class="{{ i==currentPage ? 'active':'' }}">
					<span ng-click=queryIndex(i)>{{i}}</span>
					</li>
					<li ng-model=currentPage ng-if="currentPage<totalPage"
						ng-click=queryIndex(currentPage+1)><span>下一页</span></li>
					<li ng-model=totalPage ng-click=queryIndex(totalPage)><span>尾页</span></li>
				</ul>
			</div>
		</div>
	</div>
	<div ng-include="'templates/segment/refund_info.html'"></div>
</div>