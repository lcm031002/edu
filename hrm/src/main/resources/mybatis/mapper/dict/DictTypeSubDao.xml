<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ebusiness.hrm.dao.DictTypeSubDao">
<resultMap type="Map" id="typeMap">    
    <id column="id" property="id"/>    
    <result column="name" property="name"/>    
    <result column="status" property="status"/>    
    <result column="remark" property="remark"/>    
    <result column="mod" property="mod"/>    
</resultMap>

<resultMap type="Map" id="dataMap">    
    <id column="id" property="id"/>    
    <result column="dictTypeid" property="dictTypeId"/>  
    <result column="name" property="name"/>    
    <result column="code" property="code"/>    
    <result column="remark" property="remark"/>    
</resultMap> 

	<!-- 查询字典子项 -->
	<select id="queryDicChildDatas" parameterType="Integer" resultMap="dataMap" resultOrdered="true"  >
		SELECT edtSub.id,edtSub.dictTypeId,  edtSub.name, edtSub.remark,edtSub.code
		    FROM ebs_dict_type_sub edtSub
		   WHERE edtSub.dictTypeId=#{id, jdbcType = NUMERIC}
		   order by edtSub.id
	</select>
	
	<!-- 添加字典子项 -->
	<insert id="insertDicData" parameterType="com.ebusiness.hrm.model.DictTypeSub" keyColumn="id"  >
	<selectKey resultType="java.lang.Integer"  keyProperty="id" order="BEFORE">
	       SELECT seq_ebs_dict_type_sub.nextval as id FROM dual
	   </selectKey>
	 INSERT INTO ebs_dict_type_sub
		(  id,
		   dictTypeId,
		   name,
		   remark,
		   code
		)
		
	    select #{id,jdbcType=NUMERIC},
		#{dictTypeId, jdbcType=NUMERIC},
		#{name, jdbcType=VARCHAR},
		#{remark, jdbcType=VARCHAR},
		#{code,jdbcType=NUMERIC}
		 from dual
	</insert>

   <!-- 更新字典子项 -->
	 <update id="updateDicData" parameterType="Map" >
			UPDATE
			ebs_dict_type_sub
			SET
			name = #{name, jdbcType=VARCHAR},
			code = #{code, jdbcType=NUMERIC},
			remark = #{remark, jdbcType=VARCHAR}
			WHERE id = #{id, jdbcType=NUMERIC} 	
   </update>
   
   <!-- 删除字典子项 -->
   <delete id="deleteDicData" parameterType="Integer">
    DELETE FROM ebs_dict_type_sub where id=#{id, jdbcType = NUMERIC}
   </delete>

	
</mapper>