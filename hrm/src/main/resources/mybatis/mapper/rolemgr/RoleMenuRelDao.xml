<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ebusiness.hrm.dao.RoleMenuRelDao">

	<!-- 根据角色id查询角色菜单权限关系 -->
	<select id="queryRoleMenu" parameterType="Long" 
	resultType="java.lang.String">
		SELECT
			err.menuIndex
		FROM ebs_rolemenu_rel err
		WHERE roleId=#{id,jdbcType=NUMERIC}
	</select>
	
	<!-- 添加角色 菜单权限关系-->
	<insert id="addRoleMenu" parameterType="Map">
		INSERT INTO ebs_rolemenu_rel
		(
			id,
			roleId,
			menuIndex
		)
		SELECT 
			seq_ebs_rolemenu_rel.nextval,t.* from
			(
			<foreach collection="selectedPrivileges" item="element" index="index" separator="union" open="(" close=")">
			select
				#{roleId,jdbcType=NUMERIC},
				#{element,jdbcType=VARCHAR}
				from dual
			</foreach>
			) t
	</insert>
	
	
	<!-- 删除 角色-->
	<delete id="deleteRoleMenu" parameterType="Long">
		DELETE from ebs_rolemenu_rel where roleId=#{roleId,jdbcType = NUMERIC}
	</delete>
</mapper>