<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.edu.erp.dao.TabChangeCourseTimesDao">
	<insert id="add" parameterType="com.edu.erp.model.TabChangeCourseTimes" useGeneratedKeys="true" keyProperty="id">
		insert into tab_change_course_times (
	    <if test="change_id != null">
	       change_id,
	    </if>
	    <if test="change_course_id != null">
	       change_course_id,
	    </if>
	    <if test="course_times != null">
	       course_times,
	    </if>
	    <if test="pre_price != null">
	       pre_price,
	    </if>
	    <if test="next_price != null">
	       next_price,
	    </if>
	       change_no)
	    values (
	    <if test="change_id != null">
	       #{change_id},
	    </if>
	    <if test="change_course_id != null">
	       #{change_course_id},
	    </if>
	    <if test="course_times != null">
	       #{course_times},
	    </if>
	    <if test="pre_price != null">
	       #{pre_price},
	    </if>
	    <if test="next_price != null">
	       #{next_price},
	    </if>
	       #{change_no})
	</insert>
	
	<insert id="addList">
		insert into tab_change_course_times (
		   change_id,
		   change_course_id,
		   course_times,
		   pre_price,
		   next_price,
		   change_no)
		values
		<foreach collection="tabChangeCourseTimesList" item="item" index="index" separator=",">
		     (
		       #{item.change_id},
		       #{item.change_course_id},
		       #{item.course_times},
		       #{item.pre_price},
		       #{item.next_price},
		       #{item.change_no})
		</foreach>
	</insert>
	
	<update id="updateByChangeNo" parameterType="com.edu.erp.model.TabChangeCourseTimes">
		update tab_change_course_times set change_id = #{change_id}
	    where change_no = #{change_no}
	</update>
	
	<select id="queryChangeCourseTimes" parameterType="java.util.Map" resultType="java.lang.Integer">
		select count(1)
         from tab_change_course_times t
        where t.change_no = #{changeNo}
          and t.change_course_id = #{changeCourseId}
	</select>
	
</mapper>