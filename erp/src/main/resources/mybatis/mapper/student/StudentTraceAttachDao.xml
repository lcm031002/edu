<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.edu.erp.dao.StudentTraceAttachDao">
	<select id="queryById" parameterType="long" resultType="com.edu.erp.model.StudentTraceAttach">
		select tsta.id,
					 tsta.trace_id as traceId,
					 tsta.file_name as fileName,
					 tsta.file_url as fileUrl,
					 tsta.file_type as fileType
			from tab_student_trace_attach tsta
		 where tsta.id = #{id}
	</select>

	<insert id="addList" parameterType="list">
		<foreach collection="list" item="item" index="index" open="begin" close="; end;" separator=";">
			insert into tab_student_trace_attach t
			(
				t.id,
				t.trace_id,
				t.file_name,
				t.file_url,
			  t.file_type,
				t.create_user,
				t.create_time
			)
			values
			(
				seq_tab_student_trace_attach.nextval,
				#{item.traceId, jdbcType=NUMERIC},
				#{item.fileName, jdbcType=VARCHAR},
				#{item.fileUrl, jdbcType=VARCHAR},
				#{item.fileType, jdbcType=VARCHAR},
				#{item.create_user, jdbcType=NUMERIC},
				#{item.create_time, jdbcType=TIMESTAMP}
			)
		</foreach>
	</insert>

	<delete id="deleteByTraceId" parameterType="long">
		delete from tab_student_trace_attach where trace_id = #{traceId, jdbcType=NUMERIC}
	</delete>

	<delete id="deleteById" parameterType="long">
		delete from tab_student_trace_attach where id = #{id, jdbcType=NUMERIC}
	</delete>

</mapper>