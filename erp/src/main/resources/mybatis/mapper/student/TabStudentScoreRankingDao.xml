<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.edu.erp.dao.TabStudentScoreRankingDao">
	<select id="queryByStuScoreInfoId" parameterType="java.lang.Long"
		resultType="com.edu.erp.model.TabStudentScoreRanking">
		select tssr.id,
		       tssr.student_score_info_id as studentScoreInfoId,
		       tssr.score_ranking_type    as scoreRankingType,
		       tssr.ranking
		  from tab_student_score_ranking tssr
		 where tss.student_score_info_id = #{stuScoreInfoId, jdbcType=NUMERIC}
	</select>

	<insert id="save" parameterType="com.edu.erp.model.TabStudentScoreRanking">
		<selectKey resultType="java.lang.Long" keyProperty="id"
			order="BEFORE">
			select seq_tab_student_score_ranking.nextval as id from dual
		</selectKey>
		insert into tab_student_score_ranking
		(id,
		student_score_info_id,
		score_ranking_type,
		ranking,
		create_user,
		create_time
		)
		values
		(
		#{id, jdbcType=NUMERIC},
		#{studentScoreInfoId, jdbcType=NUMERIC},
		#{scoreRankingType, jdbcType=VARCHAR},
		#{ranking, jdbcType=NUMERIC},
		#{create_user, jdbcType=NUMERIC},
		#{create_time, jdbcType=TIMESTAMP}
		)
	</insert>
	
	<insert id="saveList" parameterType="java.util.List">
		<foreach collection="list" item="item" index="index" open="begin" close="; end;" separator=";">
			insert into tab_student_score_ranking
			(id,
			student_score_info_id,
			score_ranking_type,
			ranking,
			create_user,
			create_time
			)
			values
			(
			seq_tab_student_score_ranking.nextval,
			#{item.studentScoreInfoId, jdbcType=NUMERIC},
			#{item.scoreRankingType, jdbcType=VARCHAR},
			#{item.ranking, jdbcType=NUMERIC},
			#{item.create_user, jdbcType=NUMERIC},
			#{item.create_time, jdbcType=TIMESTAMP}
			)
		</foreach>
	</insert>

	<update id="update" parameterType="com.edu.erp.model.TabStudentScoreRanking">
		update tab_student_score_ranking
		set 
		<if test="scoreRankingType != null and scoreRankingType != ''">
			score_ranking_type = #{scoreRankingType, jdbcType=VARCHAR},
		</if>
		<if test="ranking != null">
			ranking = #{ranking, jdbcType=NUMERIC},
		</if>
			update_user = #{update_user, jdbcType=NUMERIC},
			update_time = #{update_time, jdbcType=TIMESTAMP}
		where id = #{id, jdbcType=NUMERIC}
	</update>

	<delete id="deleteById" parameterType="java.lang.Long">
		delete from tab_student_score_ranking where id = #{id, jdbcType=NUMERIC}
	</delete>

	<delete id="deleteByStuScoreInfoId" parameterType="java.lang.Long">
		delete from tab_student_score_ranking where student_score_info_id = #{studentScoreInfoId, jdbcType=NUMERIC}
	</delete>

</mapper>