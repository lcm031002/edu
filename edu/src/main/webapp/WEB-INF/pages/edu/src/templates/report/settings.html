<div class="report" ng-controller="report_taskSettingsController">
    <div class="panel panel-primary">
        <div class="panel-heading">
            <span class="title">报表任务设置</span>
        </div>
        <div class="panel-body operation-panel">
	      <div class="toolbar">
	        <button class="btn btn-primary btn-circle" ng-click="handleAddTaskSetting()">
	          <i class="fa fa-plus"></i>添加
	        </button>
	      </div>
	      <hr>
	      <div class="searchbar">
	        <form class="form-inline">
	          <span class="input-label">类型：</span>
              <select class="form-control"
                      ng-options="type.id as type.text for type in typeList"
                      ng-model="searchParam.p_type">
              </select>

              <button class="btn btn-primary" ng-click="queryTaskSettings()"><i class="iconfont icon-search"></i> 查询</button>
	        </form>
	      </div>
	    </div>
    </div>
    <div class="table-panel ov-a">
        <table class="table table-stripped min-width-1800">
            <col width="5%"/>
            <col width="13%"/>
            <col width="10%"/>
            <col width="3%"/>
            <col width="15%"/>
            <col width="10%"/>
            <col width="7%"/>
            <col width="7%"/>
            <col width="5%"/>
            <col width="6%"/>
            <col width="3%"/>
            <col width="3%"/>
            <col width="10%"/>
            <thead>
            <tr>
            	<th>操作</th>
                <th>任务编号</th>
                <th>任务名称</th>
                <th>状态</th>
                <th>处理类</th>
                <th>依赖表</th>
                <th>开始日期</th>
                <th>截止日期</th>
                <th>运行时间</th>
                <th>运行周期</th>
                <th>单位</th>
                <th>类型</th>
                <th>备注</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="taskSetting in taskSettings"
                ng-if="!loadStatues && taskSettings && taskSettings.length">
                <td><a href="javascript:void(0)" ng-click="handlePutTaskSetting(taskSetting)">修改</a></td>
                <td>{{taskSetting.taskId}}</td>
                <td>{{taskSetting.taskName}}</td>
                <td>
					<input type="checkbox"
						   bs-switch
						   ng-model="taskSetting.status"
						   switch-change="onStatusChange(taskSetting)"
						   ng-true-value="1"
						   ng-false-value="0">
				</td>
                <td>{{taskSetting.classImpl}}</td>
                <td>{{taskSetting.tables}}</td>
                <td>{{taskSetting.startDate}}</td>
                <td>{{taskSetting.endDate}}</td>
                <td>{{taskSetting.runTime}}</td>
                <td>{{taskSetting.period}}</td>
                <td>{{taskSetting.unitName}}</td>
                <td>{{taskSetting.typeName}}</td>
                <td>{{taskSetting.remark}}</td>
            </tr>
            </tbody>
        </table>
        <div class="text-center" ng-if="loadStatues">
			<img src="img/erp/loading2.gif">
        </div>
        <div class="text-center" ng-if="!loadStatues && (taskSettings == null || taskSettings.length == 0)">
            <div class="no-data"></div>
            暂无数据
        </div>
    </div>
</div>
