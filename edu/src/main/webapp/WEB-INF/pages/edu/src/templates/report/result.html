<div class="report" ng-controller="report_taskResultController">
    <div class="panel panel-primary">
        <div class="panel-heading">
            <span class="title">报表任务运行状态</span>
        </div>
        <div class="panel-body">
	    	<div class="searchbar">
	        	<div class="form-inline">
	        		<div class="form-group">
	          			<span class="input-label">类型：</span>
              			<select class="form-control"
                      			ng-options="type.id as type.text for type in typeList"
                      			ng-model="searchParam.p_type">
              			</select>
	        		</div>
	        		
	        		<div class="form-group">
              			<span class="input-label">任务编号：</span>
              			<input class="form-control" ng-model="searchParam.p_task_id" />
	        		</div>
	        		
	        		<div class="form-group">
              			<span class="input-label">运行流水：</span>
              			<input class="form-control" ng-model="searchParam.p_task_flow" />
	        		</div>
              
              		<div class="form-group">
            			<span class="input-label">运行日期：</span>
              			<rd-date-picker-popup ng-model="searchParam.p_run_time"></rd-date-picker-popup>
            		</div>
            	</div>
            
            	<div class="form-inline">
            		<div class="form-group">
            			<span class="input-label">运行id：</span>
              			<input class="form-control" ng-model="searchParam.p_task_table_val" type="number" />
            		</div>
            
            		<div class="form-group">
            			<span class="input-label">运行结果：</span>
           				<select class="form-control"
                   				ng-options="runResult.id as runResult.text for runResult in runResultList"
                   				ng-model="searchParam.p_run_result">
           				</select>
           			 </div>
              
					<div class="form-group">
              			<button class="btn btn-primary" ng-click="queryTaskResult()"><i class="iconfont icon-search"></i> 查询</button>
            		</div>
	        	</div>
	      	</div>
	    </div>
    </div>
    <div class="table-panel ov-a">
        <table class="table table-stripped min-width-1600">
            <col width="5%"/>
            <col width="10%"/>
            <col width="10%"/>
            <col width="12%"/>
            <col width="5%"/>
            <col width="5%"/>
            <col width="16%"/>
            <col width="8%"/>
            <col width="8%"/>
            <col width="5%"/>
            <col width="16%"/>
            <thead>
            <tr>
            	<th>操作</th>
                <th>任务编号</th>
                <th>任务名称</th>
                <th>运行日期</th>
                <th>任务类型</th>
                <th>运行结果</th>
                <th>运行流水</th>
                <th>运行初始id</th>
                <th>运行结束id</th>
                <th>运行类型</th>
                <th>备注</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="taskResult in taskResultList"
                ng-if="!loadStatues && taskResultList && taskResultList.length">
                <td><a href="javascript:void(0)" ng-click="executeTask(taskResult)">运行</a></td>
                <td>{{taskResult.taskId}}</td>
                <td>{{taskResult.taskName}}</td>
                <td>{{taskResult.runTime | date:'yyyy-MM-dd HH:mm:ss' }}</td>
                <td>{{taskResult.typeName}}</td>
                <td>{{taskResult.runResultName}}</td>
                <td>{{taskResult.taskFlow}}</td>
                <td>{{taskResult.taskTableLastVal}}</td>
                <td>{{taskResult.taskTableCurrentVal}}</td>
                <td>{{taskResult.taskTableTypeName}}</td>
                <td>{{taskResult.remark}}</td>
            </tr>
            </tbody>
        </table>
        <div class="text-center" ng-if="loadStatues">
			<img src="img/erp/loading2.gif">
		</div>
        <ng-pagination conf="paginationConf" ng-if="!loadStatues"></ng-pagination>

    </div>
</div>
