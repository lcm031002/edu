<div class="report {{loadStatues!=false?'':'min-width-5000'}}" ng-controller="report_perfDetailsController">
  <div class="panel panel-primary">
    <div class="panel-heading">
      <span class="title">业绩明细表</span>
    </div>
    <div class="panel-body">
      <div class="toolbar" style="width: 80vw;">
        <div class="form form-inline">
          <div class="form-group m-0 mr-r20">
            <rd-date-picker-range 
              ng-start-date="searchParam.p_start_date" 
              ng-end-date="searchParam.p_end_date" 
              ng-default-range="'today'">
              <!-- ng-click="queryReport()" -->
            </rd-date-picker-range>
          </div>
        </div>
        <div class="form form-inline">
          <div class="form-group m-0">
            <rd-branch ng-bu-id="searchParam.p_bu_id"
              ng-branch-id="searchParam.p_branch_id">
            </rd-branch>
          </div>
          <div class="form-group">
              课程季：
            <select class="form-control" 
              ng-options="timeSeason.id as timeSeason.course_season_name for timeSeason in timeSeasonList" 
              ng-model="searchParam.p_season_id">
            </select>
          </div>
          <div class="input-group" ng-click=checkedWfd() ng-show="false">
            <input type=checkbox ng-if=!performance.isWfd>
            <input type=checkbox checked ng-if=performance.isWfd>
            查询晚自习(默认查询大小班)
          </div>
          <div class="form-group">
            学员姓名（编码）：
            <div class="input-group">
             <input type="text" class="form-control" ng-model="searchParam.p_student_info" />
            </div>
          </div>
          <div class="form-group">
            制单人（姓名）:
            <div class="input-group">
              <input type="text" class="form-control" ng-model="searchParam.p_agent_name" placeholder="" />
            </div>
            <!-- <button class="btn btn-primary" ng-click="queryReport()"><i class="iconfont icon-search"></i> 查询</button> -->
            <button class="btn btn-primary" ng-click="exportReport()"><i class="iconfont icon-export"></i> 导出</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="table-panel">
    <table class="table table-stripped">
      <col width="50" />
      <col width="180" />
      <col width="180" />
      <col width="180" />
      <col width="120" />
      <col width="180" />
      <col width="100" />
      <col width="80" />
      <col width="100" />
      <col width="100" />
      <col width="100" />
      <col width="100" />
      <col width="100" />
      <col width="100" />
      <col width="100" />
      <col width="100" />
      <col width="100" />
      <col width="100" />
      <col width="100" />
      <col width="100" />
      <col width="100" />
      <col width="100" />
      <col width="100" />
      <col width="100" />
      <col width="100" />
      <col width="100" />
      <col width="100" />
      <col width="120" />
      <col width="80" />
      <col width="80" />
      <col width="80" />
      <col width="80" />
      <col width="100" />
      <col width="100" />
      <col width="100" />
      <col width="100" />
      <thead>
        <tr>
          <th>序号</th>
          <th>单据编号</th>
          <th>付款时间</th>
          <th>报班合同编号</th>
          <th>业务校区</th>
          <th>学生编号</th>
          <th>学生姓名</th>
          <th>操作类型</th>
          <th>业绩</th>
          <th>现金</th>
          <th>刷卡</th>
          <th>转账</th>
          <th>账户金额</th>
          <th>转出金额</th>
          <th>转入金额</th>
          <th>合同作废金额</th>
          <th>退费金额</th>
          <th>退费作废</th>
          <th>课时 /课次</th>
          <th>客户账号</th>
          <th>课程商品</th>
          <th>年级</th>
          <th>科目</th>
          <th>时长</th>
          <th>任课教师ID</th>
          <th>任课教师</th>
          <th>业绩校区</th>
          <th>课程季</th>
          <th>制单人</th>
          <th>原制单人</th>
          <th>新单/续单</th>
          <th>报班折扣</th>
          <th>报班应缴金额</th>
          <th>报班说明</th>
          <th>整单优惠</th>
          <th>单科优惠</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="perfDetail in perfDetails" ng-if="!loadStatues && perfDetails && perfDetails.length">
          <td>{{$index + 1}}</td>
          <td class="word_break">{{perfDetail.order_number}}</td>
          <td>{{perfDetail.business_date}}</td>
          <td class="word_break">{{perfDetail.order_no}}</td>
          <td>{{perfDetail.branch_name}}</td>
          <td class="word_break">{{perfDetail.student_code}}</td>
          <td class="word_break">{{perfDetail.student_name}}</td>
          <td>{{perfDetail.operate_type_name}}</td>
          <td class="word_break">{{perfDetail.performance}}</td>
          <td class="word_break">{{perfDetail.cash}}</td>
          <td class="word_break">{{perfDetail.card}}</td>
          <td class="word_break">{{perfDetail.transfer}}</td>
          <td class="word_break">{{perfDetail.account}}</td>
          <td class="word_break">{{perfDetail.transfer_out}}</td>
          <td class="word_break">{{perfDetail.transfer_in}}</td>
          <td class="word_break">{{perfDetail.cancel_order_amount}}</td>
          <td class="word_break">{{perfDetail.refund}}</td>
          <td class="word_break">{{perfDetail.cancel_refund_amount}}</td>
          <td class="word_break">{{perfDetail.course_time}}</td>
          <td class="word_break">{{perfDetail.customer_account}}</td>
          <td>{{perfDetail.course_name}}</td>
          <td>{{perfDetail.grade_name}}</td>
          <td>{{perfDetail.subject_name}}</td>
          <td>{{perfDetail.duration}}</td>
          <td class="word_break">{{perfDetail.teacher_id}}</td>
          <td>{{perfDetail.teacher_name}}</td>
          <td>{{perfDetail.performance_branch_name}}</td>
          <td>{{perfDetail.season_name}}</td>
          <td>{{perfDetail.agent_name}}</td>
          <td>{{perfDetail.original_create_user_name}}</td>
          <td>{{perfDetail.is_new_continued_name}}</td>
          <td class="word_break">{{perfDetail.order_discount}}</td>
          <td class="word_break">{{perfDetail.order_amount_payable}}</td>
          <td class="word_break">{{perfDetail.order_explain}}</td>
          <td>{{perfDetail.order_rule_name}}</td>
          <td>{{perfDetail.course_rule_name}}</td>
        </tr>
      </tbody>
    </table>
    <div class="text-center" ng-if="loadStatues">
      <img src="img/erp/loading2.gif">
    </div>
    <div class="text-center" ng-if="!loadStatues && (perfDetails == null || perfDetails.length == 0)">
      <div class="no-data"></div>
      暂无数据
    </div>
  </div>
</div>
